{
  "filename": "docs/events-test-training-generator.md",
  "content": "# Push: Fix: Align local branch with remote\n\n## Overview\nThis feature introduces a comprehensive AI training event generator script designed to simulate realistic GitHub repository activities. The primary purpose is to align local development environments with remote repository states by generating authentic push events, pull requests, issues, and comments. This helps in testing CI/CD pipelines, training models on real-world collaboration patterns, and ensuring that local branch configurations remain synchronized with remote counterparts.\n\nThe script provides a command-line interface to trigger various scenarios, each combining code updates with corresponding documentation changes. This ensures that feature developments are always accompanied by documentation updates, maintaining consistency between code and docs.\n\n## Usage\n\nThe script is executed interactively. It presents a menu where you can select the type of event to generate:\n\n```bash\npython events_test.py\n```\n\nYou will see the following menu:\n\n```\n=== AI Training Event Generator ===\n1. Push (Code + Doc update)\n2. Pull Request (New Feature Code + Docs)\n3. Issue (Refers to specific files)\n4. Comment (Discusses code/docs)\n5. Exit\n```\n\n### Example: Triggering a Push Event\n\nSelecting option `1` simulates a push event where both code and documentation files are updated and pushed to the remote repository. The script randomly selects a scenario, creates or updates files locally, commits them, and pushes to the specified branch.\n\n**Scenario Example:**\n- **Name**: \"Update Server Port\"\n- **Code File**: `src/main.py`\n- **Doc File**: `README.md`\n\nThe script automatically creates directories if needed, writes content, and executes Git commands via `subprocess`.\n\n### Example: Triggering a Pull Request\n\nSelecting option `2` creates a new branch, adds new feature files (both code and docs), pushes the branch, and uses the GitHub API to create a pull request. The PR title, body, and branch are dynamically generated based on predefined scenarios.\n\n**Scenario Example:**\n- **Branch**: `feature-auth-login-{timestamp}`\n- **Title**: \"Add OAuth Login Flow\"\n- **Files**:\n  - `src/auth.py`: Implements `login_oauth()` function.\n  - `docs/auth.md`: Documents the OAuth flow.\n\n### Example: Triggering an Issue or Comment\n\nOptions `3` and `4` interact with GitHub issues. You can create issues that reference specific files or add comments to existing issues to simulate discussions about code and documentation alignment.\n\n## Configuration\n\nBefore running the script, you must configure the following variables at the top of the file:\n\n- `GITHUB_TOKEN`: Your GitHub personal access token (with repo and workflow permissions).\n- `REPO_OWNER`: The GitHub username or organization owning the repository.\n- `REPO_NAME`: The name of the repository.\n- `BRANCH_NAME`: The default branch (usually \"master\" or \"main\").\n\nExample:\n\n```python\nGITHUB_TOKEN = \"ghp_xxx\"\nREPO_OWNER = \"YourUsername\"\nREPO_NAME = \"your-repo\"\nBRANCH_NAME = \"main\"\n```\n\n## API Reference\n\n### Functions\n\n#### `get_push_content()`\n\n**Returns**: A dictionary representing a realistic push scenario.\n\n**Description**: Returns a scenario where both code and documentation are updated together. Randomly selects from predefined scenarios (e.g., \"Update Server Port\" or \"Fix Math Logic\").\n\n**Example Output**:\n```python\n{\n    \"name\": \"Update Server Port\",\n    \"file_code\": \"src/main.py\",\n    \"content_code\": \"# Python code snippet\",\n    \"file_doc\": \"README.md\",\n    \"content_doc\": \"# Documentation snippet\"\n}\n```\n\n#### `get_pr_content()`\n\n**Returns**: A dictionary representing a new feature scenario for a pull request.\n\n**Description**: Returns a scenario for creating a new feature branch with code and documentation. Randomly selects from predefined feature scenarios (e.g., OAuth login or database connector).\n\n**Example Output**:\n```python\n{\n    \"branch\": \"feature-auth-login\",\n    \"title\": \"Add OAuth Login Flow\",\n    \"body\": \"This PR implements...\",\n    \"files\": {\n        \"src/auth.py\": \"def login_oauth(provider): ...\",\n        \"docs/auth.md\": \"# Authentication\"\n    }\n}\n```\n\n#### `run_git(command)`\n\n**Arguments**:\n- `command` (str): A shell command to execute.\n\n**Description**: Executes a Git command via `subprocess.run`. Prints errors to console if the command fails.\n\n#### `ensure_dir(file_path)`\n\n**Arguments**:\n- `file_path` (str): Path to a file.\n\n**Description**: Creates the parent directory of the file if it doesn't exist, ensuring no file-write errors occur.\n\n#### `trigger_push()`\n\n**Description**: Triggers a realistic push event. It:\n1. Retrieves a push scenario using `get_push_content()`.\n2. Creates or updates the code and documentation files.\n3. Adds, commits, and pushes the changes using `run_git()`.\n\n#### `trigger_pr()`\n\n**Description**: Triggers a realistic pull request. It:\n1. Retrieves a PR scenario using `get_pr_content()`.\n2. Checks out a new branch (appended with a timestamp).\n3. Creates new files (code and docs).\n4. Commits and pushes the new branch.\n5. Creates a pull request via the GitHub API using `requests`.\n6. Switches back to the default branch.\n\n#### `trigger_issue()`\n\n**Description**: Creates a new GitHub issue that references specific files (e.g., bugs in `main.py` or missing documentation). Returns the issue number for subsequent commenting.\n\n#### `trigger_comment(issue_number)`\n\n**Arguments**:\n- `issue_number` (int): The issue number to comment on.\n\n**Description**: Adds a comment to an existing issue. Comments are randomly selected from a list and discuss code and documentation relationships.\n\n#### `main()`\n\n**Description**: Provides an interactive menu loop. It handles user input to trigger events and tracks the last created issue for commenting. Exits on selection of option `5`.\n\n## Notes\n\n- The script uses random selection for scenario generation, providing variability in training data.\n- All Git operations are performed locally, and PR creation requires a valid GitHub token.\n- Ensure that the local repository is initialized (`git init`) and linked to the remote before running.\n- The script is designed for testing and training purposes; use with caution in production repositories.\n\n---\n*Generated by Technical Documentation Generator*"
}